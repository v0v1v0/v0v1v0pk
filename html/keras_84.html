<div class="container">

<table style="width: 100%;"><tr>
<td>custom_metric</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Custom metric function</h2>

<h3>Description</h3>

<p>Custom metric function
</p>


<h3>Usage</h3>

<pre><code class="language-R">custom_metric(name, metric_fn)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>name used to show training progress output</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metric_fn</code></td>
<td>
<p>An R function with signature <code>function(y_true, y_pred){}</code> that accepts tensors.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>You can provide an arbitrary R function as a custom metric. Note that
the <code>y_true</code> and <code>y_pred</code> parameters are tensors, so computations on
them should use backend tensor functions.
</p>
<p>Use the <code>custom_metric()</code> function to define a custom metric.
Note that a name ('mean_pred') is provided for the custom metric
function: this name is used within training progress output.
</p>
<p>If you want to save and load a model with custom metrics, you should
also specify the metric in the call the <code>load_model_hdf5()</code>. For example:
<code>load_model_hdf5("my_model.h5", c('mean_pred' = metric_mean_pred))</code>.
</p>
<p>Alternatively, you can wrap all of your code in a call to
<code>with_custom_object_scope()</code> which will allow you to refer to the
metric by name just like you do with built in keras metrics.
</p>
<p>Documentation on the available backend tensor functions can be
found at <a href="https://tensorflow.rstudio.com/reference/keras/#backend">https://tensorflow.rstudio.com/reference/keras/#backend</a>.
</p>
<p>Alternative ways of supplying custom metrics:
</p>

<ul>
<li> <p><code style="white-space: pre;">⁠custom_metric():⁠</code> Arbitrary R function.
</p>
</li>
<li> <p><code>metric_mean_wrapper()</code>: Wrap an arbitrary R function in a <code>Metric</code> instance.
</p>
</li>
<li>
<p> subclass <code>keras$metrics$Metric</code>: see <code>?Metric</code> for example.
</p>
</li>
</ul>
<h3>See Also</h3>

<p>Other metrics: 
<code>metric_accuracy()</code>,
<code>metric_auc()</code>,
<code>metric_binary_accuracy()</code>,
<code>metric_binary_crossentropy()</code>,
<code>metric_categorical_accuracy()</code>,
<code>metric_categorical_crossentropy()</code>,
<code>metric_categorical_hinge()</code>,
<code>metric_cosine_similarity()</code>,
<code>metric_false_negatives()</code>,
<code>metric_false_positives()</code>,
<code>metric_hinge()</code>,
<code>metric_kullback_leibler_divergence()</code>,
<code>metric_logcosh_error()</code>,
<code>metric_mean()</code>,
<code>metric_mean_absolute_error()</code>,
<code>metric_mean_absolute_percentage_error()</code>,
<code>metric_mean_iou()</code>,
<code>metric_mean_relative_error()</code>,
<code>metric_mean_squared_error()</code>,
<code>metric_mean_squared_logarithmic_error()</code>,
<code>metric_mean_tensor()</code>,
<code>metric_mean_wrapper()</code>,
<code>metric_poisson()</code>,
<code>metric_precision()</code>,
<code>metric_precision_at_recall()</code>,
<code>metric_recall()</code>,
<code>metric_recall_at_precision()</code>,
<code>metric_root_mean_squared_error()</code>,
<code>metric_sensitivity_at_specificity()</code>,
<code>metric_sparse_categorical_accuracy()</code>,
<code>metric_sparse_categorical_crossentropy()</code>,
<code>metric_sparse_top_k_categorical_accuracy()</code>,
<code>metric_specificity_at_sensitivity()</code>,
<code>metric_squared_hinge()</code>,
<code>metric_sum()</code>,
<code>metric_top_k_categorical_accuracy()</code>,
<code>metric_true_negatives()</code>,
<code>metric_true_positives()</code>
</p>


</div>