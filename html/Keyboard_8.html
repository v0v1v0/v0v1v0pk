<div class="container">

<table style="width: 100%;"><tr>
<td>get.oc.kb</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Operating Characteristics for Single-agent Trials</h2>

<h3>Description</h3>

<p>This function generates the operating characteristics of the Keyboard design for
single-agent trials.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get.oc.kb(
  target,
  p.true,
  ncohort,
  cohortsize,
  n.earlystop = 100,
  startdose = 1,
  marginL = 0.05,
  marginR = 0.05,
  cutoff.eli = 0.95,
  extrasafe = FALSE,
  offset = 0.05,
  ntrial = 1000
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>
<p>The target dose-limiting toxicity (DLT) rate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p.true</code></td>
<td>
<p>A vector containing the true toxicity probabilities of the
investigational dose levels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncohort</code></td>
<td>
<p>A scalar specifying the total number of cohorts in the trial.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cohortsize</code></td>
<td>
<p>The number of patients in the cohort.<br>
The default is 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.earlystop</code></td>
<td>
<p>The early stopping parameter. If the number of patients
treated at the current dose reaches <code>n.earlystop</code>, then
stop the trial and select the MTD based on the observed
data.<br>
The default value is 100.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>startdose</code></td>
<td>
<p>The starting dose level for the trial.<br>
The default is 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>marginL</code></td>
<td>
<p>The difference between the target and the lower limit of the
"target key" (proper dosing interval) to be defined.<br>
The default is 0.05.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>marginR</code></td>
<td>
<p>The difference between the target and the upper limit of the
"target key" (proper dosing interval) to be defined.<br>
The default is 0.05.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cutoff.eli</code></td>
<td>
<p>The cutoff value to eliminate an overly toxic dose and all
higher doses for safety.<br>
The default value is 0.95.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extrasafe</code></td>
<td>
<p>Set <code>extrasafe=TRUE</code> to impose a stricter
stopping rule.<br>
The default is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>offset</code></td>
<td>
<p>A small positive number (between 0 and 0.5) to control how
strict the stopping rule is when <code>extrasafe=TRUE</code>. A
larger value leads to a stricter stopping rule.<br>
The default value of 0.05 generally works well.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ntrial</code></td>
<td>
<p>The total number of trials to be simulated. <br>
The default value is 1000.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The operating characteristics of the Keyboard design are generated by
simulating trials under the pre-specified true toxicity probabilities of the
investigational doses.
</p>
<p>The Keyboard design defines a series of equal-width dosing intervals (or
"keys") to present the potential locations of the true toxicity of a dose
and guide the dose escalation or de-escalation between cohorts of patients.
The Keyboard design starts by specifying a proper dosing interval, referred
to as the "target key", based on which it forms a series of equally wide
keys that span the remainder of the range from 0 to 1.
</p>
<p>The Keyboard design relies on the posterior distribution of the toxicity
probability to guide dosage. To make the decision of dose escalation or
de-escalation, given the observed data at the current dose, we identify the
key that has the highest posterior probability, referred to as the
"strongest key". This key represents where the true dose-limiting toxicity
(DLT) rate of the current dose is most likely located. If the strongest key
is to the  left of the target key, then we escalate the dose because
the data suggest that the current dose is most
likely to underdose; if the strongest key is  to the
right of the target key, then we de-escalate the dose because the observed data
suggest that the current dose is likely to overdose; and if the strongest
key is the target key, then we retain the current dose because the observed data
support the notion that the current dose is most likely to be in the proper dosing
interval.
Graphically, the strongest key is the one with the largest area under the
posterior distribution curve of the DLT rate of the current dose.
</p>
<p>An attractive feature of the Keyboard design is that its dose escalation and
de-escalation rule can be tabulated before the onset of the trial. Thus,
when conducting the trial, no calculation or model fitting is needed, and we
need to count only the number of DLTs observed at the current dose;
the decision to escalate or de-escalate the dose is based on the pre-tabulated
decision rules.
</p>
<p>Given all observed data, the Keyboard design uses an isotonic regression to obtain an efficient statistical estimate of
the maximum tolerated dose (MTD) by utilizing the fact that toxicity
presumably increases with the dose.
</p>
<p>For patient safety, the following dose-elimination rule is evaluated after
each cohort:
if at least 3 patients have been treated at the given dose and
the observed data indicate that there is more than a 95% chance that the
current dose is above the maximum tolerated dose (MTD), then we eliminate this dose and beyond from the trial to prevent exposing future patients to these
overly toxic doses. The probability threshold for elimination can be
specified with <code>cutoff.eli</code>. When a dose is eliminated, the design
recommends the next lower dose for treating the next patient.
</p>
<p>The Keyboard design has two built-in stopping rules:<br>
(1) stop the trial if the lowest dose is eliminated due to toxicity, and no
dose should be selected as the MTD; and <br>
(2) stop the trial and select the MTD if the number of patients treated at
the current dose reaches <code>n.earlystop</code>.
</p>
<p>The first stopping rule is a safety rule to protect patients from being exposed to overly toxic doses. The rationale for the second stopping
rule is that when enough (i.e., <code>n.earlystop</code>)
patients are assigned to a dose, then the dose-finding algorithm has
approximately converged. Thus, we can stop the trial early and select the
MTD to minimize the sample size and  the trial duration.
</p>
<p>For some applications, investigators may prefer a stricter stopping rule
than rule (1) for extra safety when the lowest dose is overly toxic.
This can be achieved by setting <code>extrasafe=TRUE</code>, which imposes the
following, stricter, safety stopping rule:<br>
Stop the trial if <br>
(i) the number of patients treated at the lowest dose <code class="reqn">\ge 3</code>, and <br>
(ii) </p>
<p style="text-align: center;"><code class="reqn">Pr((toxicity rate of the lowest dose &gt; target) | data)
           &gt; cutoff.eli - offset</code>
</p>

<p>As a tradeoff, the strong stopping rule will decrease the MTD selection
percentage when the lowest dose is the true MTD.
</p>


<h3>Value</h3>

<p>The function returns the operating characteristics of the Keyboard
design (single-agent) as a list, which includes: <br></p>

<ol>
<li>
<p> the selection percentage at each dose level (<code>$selpercent</code>),<br></p>
</li>
<li>
<p> the average number of patients treated at each dose level (<code>$npatients</code>),<br></p>
</li>
<li>
<p> the average number of toxicities observed at each dose level (<code>$ntox</code>),<br></p>
</li>
<li>
<p> the average number of toxicities (<code>$totaltox</code>),<br></p>
</li>
<li>
<p> the average number of patients (<code>$totaln</code>),<br></p>
</li>
<li>
<p> the percentage of early stopping due to toxicity without selecting the MTD (<code>$percentstop</code>),<br></p>
</li>
<li>
<p> the risk of overdosing 60% or more of patients (<code>$overdose60</code>),<br></p>
</li>
<li>
<p> the risk of overdosing 80% or more of patients (<code>$overdose80</code>),<br></p>
</li>
<li>
<p> a data.frame object containing simulation parameters, such as <code>target, p.true,</code> etc. (<code>$simu.setup</code>).
</p>
</li>
</ol>
<h3>Uses</h3>

<p>This function uses <code>get.boundary.kb</code> and
<code>select.mtd.kb</code>.
</p>


<h3>Author(s)</h3>

<p>Xiaomeng Yuan, Chen Li, Hongying Sun, Li Tang and Haitao Pan
</p>


<h3>References</h3>

<p>Yan F, Mandrekar SJ, Yuan Y. Keyboard: A Novel Bayesian Toxicity Probability
Interval Design for Phase I Clinical Trials.
<em>Clinical Cancer Research</em>. 2017; 23:3994-4003.
http://clincancerres.aacrjournals.org/content/23/15/3994.full-text.pdf
</p>


<h3>See Also</h3>

<p>Other single-agent functions: 
<code>get.boundary.kb()</code>,
<code>select.mtd.kb()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
### Single-agent trial ###

oc &lt;- get.oc.kb(target=0.3, p.true=c(0.05, 0.15, 0.3, 0.45, 0.6),
                ncohort=20, cohortsize=3, ntrial=1000)

oc



</code></pre>


</div>