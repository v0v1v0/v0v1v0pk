<div class="container">

<table style="width: 100%;"><tr>
<td>tsvis_nfi</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Visualize time series data for National Forest Inventory Data</h2>

<h3>Description</h3>

<p>tsvis_nfi() function analyzes and visualizes data in a time series format. It can visualize 'biomass', 'cwd', and 'iv' data as 'table', 'line', 'bar', or 'map'.
Users need to select the specific biomass variable, such as volume or carbon to visualize biomass.
For map visualization of biomass, users must choose the administrative unit level.
It uses the <code>iv_nfi</code> and <code>biomass_nfi</code> and <code>cwd_biomass_nfi</code> function for core calculations.
</p>


<h3>Usage</h3>

<pre><code class="language-R">tsvis_nfi(
  data,
  y = "biomass",
  bm_type = NULL,
  output = "line",
  plotgrp = NULL,
  isannual = TRUE,
  admin = NULL,
  strat = "FORTYP_SUB",
  clusterplot = FALSE,
  largetreearea = TRUE,
  stockedland = TRUE,
  talltree = TRUE,
  sp = "SP",
  frequency = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>: A <code>list</code> generated by <code>read_nfi</code> that contains 'plot' and 'tree' data frames.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>: A character vector; the variable to visualize. Must be one of 'biomass', 'cwd', 'iv'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bm_type</code></td>
<td>
<p>: A character vector; the specific variable to visualize for 'biomass' or 'cwd'. Must be one of 'volume', 'biomass', 'AG_biomass', 'carbon', 'co2'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output</code></td>
<td>
<p>: A character vector; the desired type of visualization. Must be one of 'table', 'line', 'bar', 'map'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plotgrp</code></td>
<td>
<p>: A character vector; specifies variables from the 'plot' table to use for grouping. Use <code>c()</code> to combine multiple variables, but if the output is a map, line or bar plot, only one variable can be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>isannual</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, the result is provided annually, if FALSE, it is provided in 5-year intervals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>admin</code></td>
<td>
<p>: A character vector; the administrative unit for visualizing 'biomass' or 'cwd' as a map. Must be one of 'sido', 'sgg', 'emg'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strat</code></td>
<td>
<p>: A character vector; the variable used for post-stratification. In the National Forest Inventory of Korea, it is typically used by forest type.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clusterplot</code></td>
<td>
<p>: A logical flag (default FALSE); if TRUE, treats each cluster plot as a single unit. If FALSE, calculates for each subplot separately.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>largetreearea</code></td>
<td>
<p>: A logical flag (default FALSE); if TRUE, includes large tree survey plots in the analysis. If FALSE, only uses standard tree plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stockedland</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes only stocked land. If FALSE, includes all land types.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>talltree</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes only tall trees. If FALSE, includes both trees and shrubs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sp</code></td>
<td>
<p>: A character vector; the column name of species information (e.g., "SP" for species, "GENUS" for genus-level analysis).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>frequency</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes frequency in importance value calculations.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>If the output is a map, line, or bar plot: an object of class <span class="pkg">ggplot</span>.
If the output is a table: a <code>data.frame</code>.
</p>


<h3>Note</h3>

<p>To visualize data as a map, you need to agree to install the <code>kadmin</code> package during the function execution or install it in advance.
The <code>kadmin</code> package loads shapefiles for Korea's Si, Do or Si, Gun, Gu or Eup, Myeon, Dong.
Use <code style="white-space: pre;">⁠drat::addRepo("SYOUNG9836") install.packages("kadmin")⁠</code> or <code>remotes::install_github("SYOUNG9836/kadmin")</code>
</p>


<h3>See Also</h3>

<p><code>iv_nfi</code> for calculating the importance values.
<code>biomass_nfi</code> for calculating the biomass.
<code>cwd_biomass_nfi</code> for calculating the biomass of Coarse Woody Debris.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data("nfi_donghae")

# Visualize importance values as a table
tsvis_iv &lt;- tsvis_nfi(nfi_donghae, y = "iv", output = "table")

# Create a bar plot of importance values at 5-year intervals
tsvis_iv_bar &lt;- tsvis_nfi(nfi_donghae, y = "iv", output = "bar", isannual = FALSE)

# Generate a line plot of carbon biomass over time, grouped by age class
tsvis_bm_line &lt;- tsvis_nfi(nfi_donghae, y = "biomass", 
                            bm_type = "carbon", output = "line", plotgrp = "AGE_CLS")
                            

# Create a map of volume at the sido level
tsvis_bm_map &lt;- tsvis_nfi(nfi_donghae, admin = "sido", 
                           y = "biomass", bm_type = "volume", output = "map")



</code></pre>


</div>