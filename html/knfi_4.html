<div class="container">

<table style="width: 100%;"><tr>
<td>diversity_nfi</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate species diversity indices for National Forest Inventory Data</h2>

<h3>Description</h3>

<p>diversity_nfi() function calculates species richness, evenness and the Shannon and Simpson diversity indices for National Forest Inventory (NFI) data.
It can provide diversity measures for individual plots, the entire study area, or specific groups within the study area using parameters <code>byplot</code> or <code>plotgrp</code>.
The function can calculate diversity at the species or genus level for different vegetation components (trees, herbs, vegetation, saplings).
It uses the <code>diversity</code> function from the <span class="pkg">vegan</span> package for core calculations.
Users have flexibility in specifying data inclusion criteria and analysis levels using parameters <code>clusterplot</code>, <code>largetreearea</code>, <code>stockedland</code>, and <code>talltree</code>.
These parameters determine whether to treat cluster plots as single plots, to include large tree survey plots, and to focus only on Stocked land and tall trees.
</p>


<h3>Usage</h3>

<pre><code class="language-R">diversity_nfi(
  data,
  sp = "SP",
  table = "tree",
  basal = FALSE,
  plotgrp = NULL,
  byplot = FALSE,
  clusterplot = FALSE,
  largetreearea = FALSE,
  stockedland = TRUE,
  talltree = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>: A <code>list</code> generated by <code>read_nfi</code> that contains 'plot' and one of ('tree', 'herb', 'veg', 'sapling') data frames.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sp</code></td>
<td>
<p>: A character vector; the column name of species information (e.g., "SP" for species, "GENUS" for genus-level analysis).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>table</code></td>
<td>
<p>: A character vector; Specifies which vegetation table to use for diversity analysis. Must be one of 'tree', 'herb', 'veg', 'sapling'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>basal</code></td>
<td>
<p>: A logical flag (default FALSE); if TRUE, calculates tree diversity using basal area. If FALSE, uses number of individuals. Only applicable when <code>table = "tree"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plotgrp</code></td>
<td>
<p>: A character vector; specifies variables from 'plot' table to use for grouping. Use <code>c()</code> to combine multiple variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>byplot</code></td>
<td>
<p>: A logical flag (default FALSE); if TRUE, calculates statistics for each plot separately. If FALSE, calculates for the entire dataset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clusterplot</code></td>
<td>
<p>: A logical flag (default FALSE); if TRUE, treats each cluster plot as a single unit. If FALSE, calculates for each subplot separately.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>largetreearea</code></td>
<td>
<p>: A logical flag (default FALSE); if TRUE, includes large tree survey plots in the analysis. If FALSE, only uses standard tree plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stockedland</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes only stocked land. If FALSE, includes all land types.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>talltree</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes only tall trees. If FALSE, includes both trees and shrubs.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function calculates the following diversity indices (mean and standard error):
</p>

<ul>
<li>
<p> Species richness: The total number of species surveyed.
</p>
</li>
<li>
<p> Shannon-Wiener index: Calculated as the sum of the proportions of individuals or basal area of each species relative to the total.
</p>
</li>
<li>
<p> Gini-Simpson index: Calculated as 1 minus Simpson's index. Ranges from 0 to 1, with higher values indicating greater diversity.
</p>
</li>
<li>
<p> Species evenness: Calculated by dividing Shannon diversity by the natural logarithm of species richness.
Ranges from 0 to 1, with 1 indicating that all species are evenly distributed.
</p>
</li>
</ul>
<h3>Value</h3>

<p>A <code>data.frame</code> that includes diversity indices.
The structure depends on the input parameters:
</p>

<ul>
<li>
<p> If <code>byplot = TRUE</code>, each row represents a plot.
</p>
</li>
<li>
<p> If <code>byplot = FALSE</code>, each row represents the entire dataset or a group specified by <code>plotgrp</code>
</p>
</li>
</ul>
<h3>Note</h3>

<p>The 'herb', 'veg', and 'sapling' tables may contain a lot of errors, so use caution when interpreting results from these tables.
</p>


<h3>References</h3>

<p>Shannon, C. E. (1948). A mathematical theory of communication. The Bell System Technical Journal, 27(3), 379–423.
Simpson, E. H. (1949). Measurement of diversity. Nature, 163(4148), 688–688.
Pielou, E. C. (1966). The measurement of diversity in different types of biological collections. Journal of Theoretical Biology, 13, 131–144.
</p>


<h3>See Also</h3>

<p><code>diversity</code> for calculating the Shannon and Simpson diversity indices.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data("nfi_donghae")

# Calculate tree diversity indices using basal area
tree_ba_diversity &lt;- diversity_nfi(nfi_donghae, sp = "SP", table = "tree", basal = TRUE)

# Calculate tree diversity indices using number of individuals
tree_indi_diversity &lt;- diversity_nfi(nfi_donghae, sp = "SP", table = "tree", basal = FALSE)

</code></pre>


</div>